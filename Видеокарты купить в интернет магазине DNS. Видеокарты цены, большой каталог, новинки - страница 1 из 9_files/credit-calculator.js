!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=754)}({0:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dom_onDocumentReady=function(t,e){void 0===e&&(e=!1),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):e&&t(void 0)}},12:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.XS="xs",t.SM="sm",t.MD="md",t.LG="lg",t.W_400="w_400",t.W_1200="w_1200"}(e.BaseModalSizesEnum||(e.BaseModalSizesEnum={}))},153:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return Object.defineProperty(t,"msOneSecond",{get:function(){return 1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t,"msOneMinute",{get:function(){return 60*t.msOneSecond},enumerable:!0,configurable:!0}),Object.defineProperty(t,"msOneHour",{get:function(){return 60*t.msOneMinute},enumerable:!0,configurable:!0}),t.MONTHS_IN_YEAR=12,t}();e.DateHelper=i},2:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domToggleClass=function(t,e,n){void 0===n&&(n=!t.classList.contains(e)),!0===n?t.classList.add(e):t.classList.remove(e)}},20:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(21),r=new Map;r.set("ruble",{sign:"₽",short:"руб",symbol:"р",postfix:["рубль","рубля","рублей"]}),r.set("tenge",{sign:"₸",short:"тңг",symbol:"т",postfix:["теңге","теңге","теңге"]});var a=function(){if(!window.currencyValue){var t=document.querySelector('meta[name="currency"]');null!==t&&(window.currencyValue=t.content),window.currencyValue=window.currencyValue||"ruble",window.localStorage.setItem(i.LOCAL_STORAGE_CURRENCY_NAME,window.currencyValue)}return r.get(window.currencyValue)},o=function(){function t(){}return Object.defineProperty(t,"sign",{get:function(){return a().sign},enumerable:!0,configurable:!0}),Object.defineProperty(t,"symbol",{get:function(){return a().symbol},enumerable:!0,configurable:!0}),Object.defineProperty(t,"short",{get:function(){return a().short},enumerable:!0,configurable:!0}),Object.defineProperty(t,"postfix",{get:function(){return a().postfix},enumerable:!0,configurable:!0}),t}();e.default=o},21:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SESSION_STORAGE_CHECKOUT_PRESET_SHOP_ID="SESSION_STORAGE_CHECKOUT_PRESET_SHOP_ID",e.LOCAL_STORAGE_CURRENCY_NAME="LOCAL_STORAGE_CURRENCY_NAME"},22:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(20));e.String_formatPrice=function(t,e){void 0===e&&(e=!1);var n=t<0?"-":"",i=parseFloat(Math.abs(t)+"")+"",a=i.length>3?i.length%3:0,o="";return o+=0!==a?i.substr(0,a)+" ":"",o+=i.substr(a).replace(/(\d{3})(?=\d)/g,"$1 "),e&&(o+=" "+r.default.sign),n+o}},235:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.get=function(t){return[{title:"Как оформить "+(t?"рассрочку":"кредит")+" в магазине",points:["Приходите в удобный магазин. Обязательно возьмите паспорт.","Выберите товар.","Обратитесь к представителю банка в магазине. Вас проконсультируют по условиям предоставления кредита.","Если условия кредита вас устраивают, заключите договор с банком и вернитесь домой с покупкой!"],ordered:!0},{title:"Как оформить "+(t?"рассрочку":"кредит")+" онлайн",points:["Добавьте товары в корзину.",'На этапе оформления заказа выберите способ оплаты "онлайн-кредит" и подходящий банк.',"После подтверждения заказа вас перенаправит на сайт банка для заполнения анкеты. После одобрения следуйте инструкциям банка."],ordered:!0},{title:"Условия кредитования",points:["Условия кредитования банки устанавливают в индивидуальном порядке.","Подробную информацию можно получить на горячей линии выбранной кредитной организации."],ordered:!1}]},t}();e.default=i},236:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(153),a=n(22),o=function(){function t(t){this._price=t,this._init()}return Object.defineProperty(t.prototype,"price",{set:function(t){this._price=t,this._updatePayment(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t.prototype.getMonthPayment=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this._config.period.default);var n=this._config.anniversaryRate/r.DateHelper.MONTHS_IN_YEAR;return(this._price-t)*n/(1-1/Math.pow(1+n,e))},Object.defineProperty(t.prototype,"_config",{get:function(){return window.creditCalculatorConfig},enumerable:!0,configurable:!0}),t.prototype._init=function(){var t=this;this._element=this._tag();var e=this._tag("__controls");e.innerHTML="<div>Первый взнос, руб.</div><div>Срок, мес.</div>",this._element.appendChild(e),this._firstPaymentInput=window.inputSmall.draw(e,{});for(var n=[],i=this._config.period.min;i<=this._config.period.max;i+=this._config.period.step){var r=document.createElement("option");r.value=""+i,r.text=""+i,r.selected=i===this._config.period.default,n.push(r)}this._periodInput=window.inputSelect.create(n),this._periodInput.classList.add(this._class("__period")),e.appendChild(this._periodInput),this._element.appendChild(e),this._maxFirstPaymentMessage=this._tag("__max-first-payment");var a=this._tag("__max-first-payment-close");if(a.addEventListener("click",function(){t._toggleMaxFirstPayment(!1)}),this._maxFirstPaymentMessage.appendChild(a),this._element.appendChild(this._maxFirstPaymentMessage),this._monthPaymentElement=this._tag("__month-payment"),this._element.appendChild(this._monthPaymentElement),this._price>=this._config.homeCreditMinAmount){var o=window.links.createLinkBlue("Узнать кредитный лимит",this._config.creditLimitUrl);o.classList.add(this._class("__limit")),this._element.appendChild(o)}this._addEvents(),this._updatePayment()},t.prototype._addEvents=function(){var t=this;["keyup","click","change"].forEach(function(e){t._firstPaymentInput.input.addEventListener(e,t._firstPaymentHandler.bind(t))}),this._periodInput.addEventListener("change",this._updatePayment.bind(this))},t.prototype._toggleMaxFirstPayment=function(t){i.domToggleClass(this._maxFirstPaymentMessage,this._class("__max-first-payment_show"),t)},t.prototype._firstPaymentHandler=function(){return this._toggleMaxFirstPayment(!1),!0===this._maxFirstPaymentReached()?(this._toggleMaxFirstPayment(!0),this._firstPaymentInput.value=""+this._maxFirstPayment,this._updatePayment(),!1):(0>=this._firstPayment&&(this._firstPaymentInput.value=""),this._updatePayment(),!0)},t.prototype._updatePayment=function(t){void 0===t&&(t=!1),this._maxFirstPayment=Math.round(this._price*this._config.maxFirstPaymentPercent),this._maxFirstPaymentMessage.innerHTML='Максимальная сумма первоначального взноса <span class="'+this._class("__max-first-payment-value")+'">'+a.String_formatPrice(this._maxFirstPayment,!0)+"</span>",this._firstPaymentInput.input.max=""+this._maxFirstPayment;var e=this.getMonthPayment(this._firstPayment,this._creditPeriod);this._monthPaymentElement.innerHTML="Ежемесячный платеж: "+a.String_formatPrice(Math.round(e),!0),t&&this._firstPaymentHandler()},Object.defineProperty(t.prototype,"_firstPayment",{get:function(){var t=parseFloat(this._firstPaymentInput.value);return isNaN(t)||!1===isFinite(+this._firstPaymentInput.value)?0:Math.min(t,this._price)},enumerable:!0,configurable:!0}),t.prototype._maxFirstPaymentReached=function(){return this._firstPayment>=this._maxFirstPayment},Object.defineProperty(t.prototype,"_creditPeriod",{get:function(){return parseFloat(this._periodInput.value)||this._config.period.default},enumerable:!0,configurable:!0}),t.prototype._tag=function(t,e){void 0===t&&(t=""),void 0===e&&(e="div");var n=document.createElement(e);return n.classList.add(this._class(t)),n},t.prototype._class=function(t){return"credit-calculator"+t},t}();e.default=o},754:function(t,e,n){t.exports=n(755)},755:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),a=n(756),o=i(n(757)),s=function(){[].slice.call(document.querySelectorAll("[data-role=credit-calculator-open-link]")).forEach(function(t){t.hasAttribute("data-calc-inited")||(t.setAttribute("data-calc-inited",""),t.addEventListener("click",function(e){e.preventDefault(),new o.default(JSON.parse(t.getAttribute("data-credit-config"))).show()}))})};r.Dom_onDocumentReady(s,!0),window.addEventListener(a.CreditCalculatorEvents.INIT,s)},756:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.INIT="creditCalc:init"}(e.CreditCalculatorEvents||(e.CreditCalculatorEvents={}))},757:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=n(22),o=n(12),s=i(n(235)),u=i(n(236)),c=function(){function t(t){this._config=t}return t.prototype.show=function(){var t=window.modalProvider.getInstance({id:"credit-calc",visible:!1,headerHtml:"",contentHtml:"",isFullScreenOnMobile:!1,contentPadded:!0,size:o.BaseModalSizesEnum.W_400,removeOnHidden:!0});t.setHeader(this._config.modalHeader),this._initModalContent(t),t.show()},t.prototype._initModalContent=function(t){var e=this,n=this._config,i=t.getContent();i.innerHTML="";var r=this._tag("__total");r.innerHTML="Стоимость товаров:";var o=this._tag("__total-value","span");o.innerHTML=a.String_formatPrice(n.price,!0),r.appendChild(o),i.appendChild(r);var c=this._tag("__credit");c.innerHTML=n.isInstallment?"В рассрочку":"В кредит";var l=this._tag("__credit-value","span");if(l.innerHTML=this._creditText(),c.appendChild(l),i.appendChild(c),n.isInstallment||i.appendChild(this._collapse("Кредитный калькулятор",new u.default(n.price).element)),(new s.default).get(n.isInstallment).forEach(function(t){i.appendChild(e._collapse(t.title,t.ordered?e._points(t.points):t.points.map(function(t){return"<p>"+t+"</p>"}).join("")))}),0!==n.banksImages.length){var d=this._tag("__banks");n.banksImages.forEach(function(t){var n=e._tag("__bank-image","img");n.setAttribute("data-src",t),d.appendChild(n)}),i.appendChild(d)}if(n.banksUrl){var _=window.links.createLinkBlue("Все банки и их условия",n.banksUrl);_.classList.add(this._class("__banks-link")),i.appendChild(_),window.dispatchLazyLoadUpdateEvent()}},t.prototype._creditText=function(t){return[this._config.isInstallment?"":"от",a.String_formatPrice(Math.round(this._config.monthPayment),!0)+"/","мес."].join(" ")},t.prototype._collapse=function(t,e){var n=this,i=this._tag("__collapse-title");i.innerHTML=t,i.appendChild(this._tag("__collapse-icon")),i.addEventListener("click",function(){r.domToggleClass(i,n._class("__collapse-title_in"))});var a=this._tag("__collapse-content");"string"==typeof e?a.innerHTML=e:a.appendChild(e);var o=this._tag("__collapse");return o.appendChild(i),o.appendChild(a),o},t.prototype._points=function(t){var e=this,n=[];t.forEach(function(t,i){var r=e._tag("__point");r.innerText=(i+1).toString(10),n.push("<div>"+r.outerHTML+"</div>"),n.push("<div>"+t+"</div>")});var i=this._tag("__points");return i.innerHTML=n.join(""),i},t.prototype._tag=function(t,e){void 0===e&&(e="div");var n=document.createElement(e);return t&&n.classList.add(this._class(t)),n},t.prototype._class=function(t){return"credit-calculator-modal"+t},t}();e.default=c}});