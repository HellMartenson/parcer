!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=591)}({1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domDispatchEvent=function(t,e,i){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,i),void 0===e?window.dispatchEvent(n):e.dispatchEvent(n)}},11:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),r=function(){function t(){var t=this;this._waitingElements=[],this.addWaitingState=function(e){n.Dom_addClasses(e,["ajs-placeholder","ajs-placeholder_waiting"]),t._waitingElements.push(e)}}return Object.defineProperty(t.prototype,"service",{set:function(t){this._service=t},enumerable:!0,configurable:!0}),t.prototype.needGetStateAfterBuild=function(t){return!0},t.prototype.afterRefresh=function(t){this._waitingElements.forEach(function(t){setTimeout(function(){t.classList.remove("ajs-placeholder_waiting")}),setTimeout(function(){t.classList.remove("ajs-placeholder")},1e3)}),this._waitingElements=[]},t}();e.AjaxStateProcessorAbstract=r},12:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.XS="xs",t.SM="sm",t.MD="md",t.LG="lg",t.W_400="w_400",t.W_1200="w_1200"}(e.BaseModalSizesEnum||(e.BaseModalSizesEnum={}))},13:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.WHITE="_white",t.BRAND="_brand",t.BLUE="_blue",t.GREY="_grey"}(e.ButtonColorModifiers||(e.ButtonColorModifiers={}))},153:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"msOneSecond",{get:function(){return 1e3},enumerable:!0,configurable:!0}),Object.defineProperty(t,"msOneMinute",{get:function(){return 60*t.msOneSecond},enumerable:!0,configurable:!0}),Object.defineProperty(t,"msOneHour",{get:function(){return 60*t.msOneMinute},enumerable:!0,configurable:!0}),t.MONTHS_IN_YEAR=12,t}();e.DateHelper=n},154:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.BONUS=0]="BONUS",t[t.MULTI_ACTION=1]="MULTI_ACTION",t[t.BUNDLE=2]="BUNDLE",t[t.INTERNET_PRICE=3]="INTERNET_PRICE",t[t.PAYMENT=4]="PAYMENT"}(e.MinPriceDiscountTypeEnum||(e.MinPriceDiscountTypeEnum={}))},2:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.domToggleClass=function(t,e,i){void 0===i&&(i=!t.classList.contains(e)),!0===i?t.classList.add(e):t.classList.remove(e)}},20:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=new Map;r.set("ruble",{sign:"₽",short:"руб",symbol:"р",postfix:["рубль","рубля","рублей"]}),r.set("tenge",{sign:"₸",short:"тңг",symbol:"т",postfix:["теңге","теңге","теңге"]});var s=function(){if(!window.currencyValue){var t=document.querySelector('meta[name="currency"]');null!==t&&(window.currencyValue=t.content),window.currencyValue=window.currencyValue||"ruble",window.localStorage.setItem(n.LOCAL_STORAGE_CURRENCY_NAME,window.currencyValue)}return r.get(window.currencyValue)},o=function(){function t(){}return Object.defineProperty(t,"sign",{get:function(){return s().sign},enumerable:!0,configurable:!0}),Object.defineProperty(t,"symbol",{get:function(){return s().symbol},enumerable:!0,configurable:!0}),Object.defineProperty(t,"short",{get:function(){return s().short},enumerable:!0,configurable:!0}),Object.defineProperty(t,"postfix",{get:function(){return s().postfix},enumerable:!0,configurable:!0}),t}();e.default=o},21:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SESSION_STORAGE_CHECKOUT_PRESET_SHOP_ID="SESSION_STORAGE_CHECKOUT_PRESET_SHOP_ID",e.LOCAL_STORAGE_CURRENCY_NAME="LOCAL_STORAGE_CURRENCY_NAME"},22:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(20));e.String_formatPrice=function(t,e){void 0===e&&(e=!1);var i=t<0?"-":"",n=parseFloat(Math.abs(t)+"")+"",s=n.length>3?n.length%3:0,o="";return o+=0!==s?n.substr(0,s)+" ":"",o+=n.substr(s).replace(/(\d{3})(?=\d)/g,"$1 "),e&&(o+=" "+r.default.sign),i+o}},235:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.get=function(t){return[{title:"Как оформить "+(t?"рассрочку":"кредит")+" в магазине",points:["Приходите в удобный магазин. Обязательно возьмите паспорт.","Выберите товар.","Обратитесь к представителю банка в магазине. Вас проконсультируют по условиям предоставления кредита.","Если условия кредита вас устраивают, заключите договор с банком и вернитесь домой с покупкой!"],ordered:!0},{title:"Как оформить "+(t?"рассрочку":"кредит")+" онлайн",points:["Добавьте товары в корзину.",'На этапе оформления заказа выберите способ оплаты "онлайн-кредит" и подходящий банк.',"После подтверждения заказа вас перенаправит на сайт банка для заполнения анкеты. После одобрения следуйте инструкциям банка."],ordered:!0},{title:"Условия кредитования",points:["Условия кредитования банки устанавливают в индивидуальном порядке.","Подробную информацию можно получить на горячей линии выбранной кредитной организации."],ordered:!1}]},t}();e.default=n},236:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(2),r=i(153),s=i(22),o=function(){function t(t){this._price=t,this._init()}return Object.defineProperty(t.prototype,"price",{set:function(t){this._price=t,this._updatePayment(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t.prototype.getMonthPayment=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this._config.period.default);var i=this._config.anniversaryRate/r.DateHelper.MONTHS_IN_YEAR;return(this._price-t)*i/(1-1/Math.pow(1+i,e))},Object.defineProperty(t.prototype,"_config",{get:function(){return window.creditCalculatorConfig},enumerable:!0,configurable:!0}),t.prototype._init=function(){var t=this;this._element=this._tag();var e=this._tag("__controls");e.innerHTML="<div>Первый взнос, руб.</div><div>Срок, мес.</div>",this._element.appendChild(e),this._firstPaymentInput=window.inputSmall.draw(e,{});for(var i=[],n=this._config.period.min;n<=this._config.period.max;n+=this._config.period.step){var r=document.createElement("option");r.value=""+n,r.text=""+n,r.selected=n===this._config.period.default,i.push(r)}this._periodInput=window.inputSelect.create(i),this._periodInput.classList.add(this._class("__period")),e.appendChild(this._periodInput),this._element.appendChild(e),this._maxFirstPaymentMessage=this._tag("__max-first-payment");var s=this._tag("__max-first-payment-close");if(s.addEventListener("click",function(){t._toggleMaxFirstPayment(!1)}),this._maxFirstPaymentMessage.appendChild(s),this._element.appendChild(this._maxFirstPaymentMessage),this._monthPaymentElement=this._tag("__month-payment"),this._element.appendChild(this._monthPaymentElement),this._price>=this._config.homeCreditMinAmount){var o=window.links.createLinkBlue("Узнать кредитный лимит",this._config.creditLimitUrl);o.classList.add(this._class("__limit")),this._element.appendChild(o)}this._addEvents(),this._updatePayment()},t.prototype._addEvents=function(){var t=this;["keyup","click","change"].forEach(function(e){t._firstPaymentInput.input.addEventListener(e,t._firstPaymentHandler.bind(t))}),this._periodInput.addEventListener("change",this._updatePayment.bind(this))},t.prototype._toggleMaxFirstPayment=function(t){n.domToggleClass(this._maxFirstPaymentMessage,this._class("__max-first-payment_show"),t)},t.prototype._firstPaymentHandler=function(){return this._toggleMaxFirstPayment(!1),!0===this._maxFirstPaymentReached()?(this._toggleMaxFirstPayment(!0),this._firstPaymentInput.value=""+this._maxFirstPayment,this._updatePayment(),!1):(0>=this._firstPayment&&(this._firstPaymentInput.value=""),this._updatePayment(),!0)},t.prototype._updatePayment=function(t){void 0===t&&(t=!1),this._maxFirstPayment=Math.round(this._price*this._config.maxFirstPaymentPercent),this._maxFirstPaymentMessage.innerHTML='Максимальная сумма первоначального взноса <span class="'+this._class("__max-first-payment-value")+'">'+s.String_formatPrice(this._maxFirstPayment,!0)+"</span>",this._firstPaymentInput.input.max=""+this._maxFirstPayment;var e=this.getMonthPayment(this._firstPayment,this._creditPeriod);this._monthPaymentElement.innerHTML="Ежемесячный платеж: "+s.String_formatPrice(Math.round(e),!0),t&&this._firstPaymentHandler()},Object.defineProperty(t.prototype,"_firstPayment",{get:function(){var t=parseFloat(this._firstPaymentInput.value);return isNaN(t)||!1===isFinite(+this._firstPaymentInput.value)?0:Math.min(t,this._price)},enumerable:!0,configurable:!0}),t.prototype._maxFirstPaymentReached=function(){return this._firstPayment>=this._maxFirstPayment},Object.defineProperty(t.prototype,"_creditPeriod",{get:function(){return parseFloat(this._periodInput.value)||this._config.period.default},enumerable:!0,configurable:!0}),t.prototype._tag=function(t,e){void 0===t&&(t=""),void 0===e&&(e="div");var i=document.createElement(e);return i.classList.add(this._class(t)),i},t.prototype._class=function(t){return"credit-calculator"+t},t}();e.default=o},237:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.INITED="product-buy::inited"}(e.ProductBuyEvents||(e.ProductBuyEvents={}))},26:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringCountPostfix=function(t,e,i,n){if(void 0===i&&(i=!1),0===t&&void 0!==n)return n;var r=0,s=t%10,o=t%100;2<=s&&s<=4&&(r=1),(0===s||s>=5&&s<=9||o>=11&&o<=19)&&(r=2);var a=e[Math.min(r,e.length)]||"";return i?a:t+" "+a}},3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dom_addClasses=function(t,e){e.forEach(function(e){t.classList.add(e)})}},58:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Array.from(t.keys())}},591:function(t,e,i){t.exports=i(592)},592:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(593);window.AjaxStateProcessorRegistrator.register("product-buy",new n.ProductBuyProcessor)},593:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),a=i(3),c=s(i(594)),d=i(237),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._products=new Map,e._types=new Map,e._widgets=new Map,e}return r(e,t),e.prototype.build=function(t){var e=t.data;this._products.set(t.id,e.id),this._types.set(t.id,e.type);var i={id:e.id};return e.type&&(i.type=e.type),0!==e.params.length&&(i.params=e.params),i},e.prototype.refresh=function(t,e){var i=t.data,n=document.getElementById(t.id);if(null!==n){var r=new c.default(this._products.get(t.id),this._types.get(t.id),i,e);this._widgets.set(t.id,r),a.Dom_addClasses(r.element,(n.getAttribute("class")||"").split(" ")),this.addWaitingState(r.element),n.parentElement.insertBefore(r.element,n),o.domDispatchEvent(d.ProductBuyEvents.INITED),n.remove()}},e}(i(11).AjaxStateProcessorAbstract);e.ProductBuyProcessor=u},594:function(t,e,i){"use strict";var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,s){function o(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(o,a)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(r=n[2&s[0]?"return":s[0]?"throw":"next"])&&!(r=r.call(n,s[1])).done)return r;switch(n=0,r&&(s=[0,r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],n=0}finally{i=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(26),a=i(2),c=s(i(8)),d=s(i(58)),u=i(22),l=i(13),_=i(12),p=i(87),h=i(595),f=s(i(235)),m=s(i(236)),E=i(154),v=function(){function t(t,e,i,n){this._productId=t,this._type=e,this._state=i,this._commonData=n,this._additions=new Map,this._hasServices=!1,this._isInteractive=!1,this._discounts=new Map,this._screen=new c.default,this._init()}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t.prototype._init=function(){this._element=this._tag(""),this._element.classList.add(this._class(""));var t=this._state,e=this._element;this._priceWrap=this._tag("");var i=this._priceWrap;if(this._initPrice(),-1!==[h.ProductBuyTypes.KBT,h.ProductBuyTypes.RSU].indexOf(this._type))return e.classList.add(this._class("_one-line")),void e.appendChild(i);if(t.oneClick){var n=this._line();n.appendChild(i),n.insertAdjacentHTML("beforeend",t.wishlist),e.appendChild(n);var r=this._line("second");r.insertAdjacentHTML("beforeend",t.primaryButton),r.insertAdjacentHTML("beforeend",t.oneClick),e.appendChild(r)}else e.classList.add(this._class("_one-line")),e.appendChild(i),e.insertAdjacentHTML("beforeend",t.wishlist),t.primaryButton&&(t.primaryButton.startsWith("analogs|")?e.appendChild(this._analogs):e.insertAdjacentHTML("beforeend",t.primaryButton))},Object.defineProperty(t.prototype,"_analogs",{get:function(){var t=this,e=window.button.create("Аналоги",l.ButtonColorModifiers.WHITE,{href:this._state.primaryButton.split("|")[1]}).element;return e.classList.add(this._class("__analog")),this._element.appendChild(e),e.addEventListener("click",function(e){if(window.productCardTabs){var i=window.productCardTabs(t._productId);if(!i)return;e.preventDefault(),i.show("analog").then(function(t){t||(window.location.href=el.href)})}}),e},enumerable:!0,configurable:!0}),t.prototype._initPrice=function(){var t=this._priceWrap,e=this._state;if(t.classList.add(this._class("__price-wrap")),e.tooltip&&window.tooltip.draw(t,e.tooltip,p.TooltipPositionEnum.TOP,void 0,{class:this._class("__tooltip")}),e.avail)return t.classList.add(this._class("__price-wrap_not-avail")),void(t.innerHTML=e.avail);this._initEvents(),this._updatePrice()},t.prototype._updatePrice=function(){var t=this,e=this._state,i=e.price;if(i){var n=this._priceWrap;n.innerHTML="";var r=this._tag("__price");if(n.appendChild(r),n.appendChild(this._tag("__hint")),this._toggleInteractive(!1),this._calculatedCurrent=i.min||i.current,this._additions.forEach(function(e){t._calculatedCurrent+=e.amount}),r.innerHTML=u.String_formatPrice(this._calculatedCurrent,!0),(i.min===this._calculatedCurrent&&i.min!==i.current||0!==this._additions.size||i.previous)&&r.classList.add(this._class("__price_active")),0===this._additions.size&&(i.previous||i.min&&i.current!==i.min)){var s=this._tag("__prev","span");s.innerText=u.String_formatPrice(i.current>i.previous?i.current:i.previous),r.appendChild(s)}var o=this._tag("__sub"),a=this._class("__sub_active");0!==this._additions.size?o.innerHTML="цена изменена":i.internet||i.onlinePay?(o.innerHTML="доп. скидка "+u.String_formatPrice((i.internet||0)+(i.onlinePay||0),!0),o.classList.add(a)):e.isPrepay?o.innerHTML="Требуется предоплата":e.credit&&(o.innerHTML=this._creditText(!0)),""!==o.innerHTML&&n.appendChild(o),(i.min||0!==this._additions.size||e.credit||i.previous||i.internet||i.onlinePay)&&this._toggleInteractive(!0)}},t.prototype._toggleInteractive=function(t){this._isInteractive=t,a.domToggleClass(this._priceWrap,this._class("__price-wrap_interactive"),t)},t.prototype._initEvents=function(){var t=this,e=window.productAdditionsDispatcher(this._productId);this._state.price&&this._state.price.min&&e.setMinPriceEnabled(!0),e.addAdditionalWarrantyListener(function(e){t._additions.delete("warranty"),e.price&&e.period&&t._additions.set("warranty",{amount:e.price,description:"Дополнительная гарантия "+o.stringCountPostfix(e.period,["год","года","лет"])}),t._updatePrice()}),e.addOptionalProductsListener(function(e){t._additions.delete("os"),e&&0<e.price&&t._additions.set("os",{amount:e.price,description:e.title}),t._updatePrice()}),e.addKbtServiceListener(function(e){d.default(t._additions).forEach(function(e){e.startsWith("service_")&&t._additions.delete(e)}),e.forEach(function(e){t._additions.set("service_"+e.guid,{amount:e.price,description:'Услуга "'+e.title+'"'})}),t._hasServices=0!==e.length,t._updatePrice()}),e.addExtraFeatureListener(function(e){d.default(t._additions).forEach(function(e){e.startsWith("feature_")&&t._additions.delete(e)}),e.forEach(function(e){t._additions.set("feature_"+e.id,{amount:e.price,description:e.title})}),t._updatePrice()}),this._priceWrap.addEventListener("click",function(){!1!==t._isInteractive&&t._showModal()})},t.prototype._tag=function(t,e){void 0===e&&(e="div");var i=document.createElement(e);return t&&i.classList.add(this._class(t)),i},t.prototype._class=function(t){return"product-buy"+t},t.prototype._line=function(t){void 0===t&&(t="");var e=this._tag("__line");return t&&e.classList.add(this._class("__line_"+t)),e},t.prototype._showModal=function(){return n(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return this._modal=window.modalProvider.getInstance({id:"product-buy",visible:!1,headerHtml:"Цена изменена",isFullScreenOnMobile:!0,contentPadded:!0,size:_.BaseModalSizesEnum.W_400,removeOnHidden:!0}),this._modal.setHeader(this._state.name).setContent("Загрузка...").show(),[4,this._addPriceDetailsToModal()];case 1:return t.sent(),this._addCreditInfoToModal(),this._updateTotal(),[2]}})})},t.prototype._addPriceDetailsToModal=function(){return n(this,void 0,void 0,function(){var t,e,i,n,s,o,c=this;return r(this,function(r){switch(r.label){case 0:return(t=this._state).price?(e=window.productAdditionsDispatcher(this._productId),i=this._tag("-modal__details"),n="",t.price.previous>t.price.current?(n+="<div>Полная стоимость товара</div>",n+=this._detailsAmount(t.price.previous),i.insertAdjacentHTML("beforeend","<div>Скидка</div>"),i.insertAdjacentHTML("beforeend",this._detailsAmount(t.price.current-t.price.previous))):(n+="<div>Полная стоимость товара</div>",n+=this._detailsAmount(t.price.current)),e.minPriceEnabled||t.price.internet||t.price.onlinePay?[4,e.minPrice]:[3,2]):[2];case 1:r.sent().discounts.forEach(function(t,e){if(c._discounts.set(e,{discount:t,checkbox:void 0}),null===t.optionalState)i.appendChild(c._discountLabel(e)),i.insertAdjacentHTML("beforeend",c._detailsAmount(-t.amount));else{var n=window.controlCheckbox.draw(i,{label:c._discountLabel(e),checked:t.optionalState});n.element.classList.add(c._class("-modal__detail-optional"));var r=document.createElement("div");r.innerHTML=c._detailsAmount(-t.amount);var s=function(){a.domToggleClass(r,c._class("-modal__details-amount_disabled"),!n.checked)};s(),n.input.addEventListener("change",function(){s(),c._updateTotal()}),i.appendChild(r),c._discounts.get(e).checkbox=n}}),r.label=2;case 2:return this._additions.forEach(function(t){i.insertAdjacentHTML("beforeend","<div>"+t.description+"</div>"),i.insertAdjacentHTML("beforeend",c._detailsAmount(t.amount))}),(s=this._tag("-modal__total")).innerHTML="Итого:",(o=this._modal.getContent()).innerHTML="",""===i.innerHTML?(s.innerHTML="Стоимость товара:",[h.ProductBuyTypes.KBT,h.ProductBuyTypes.RSU].includes(this._type)&&(s.innerHTML="Стоимость товаров:")):(i.insertAdjacentHTML("afterbegin",n),o.appendChild(i)),this._modalTotalValueWrap=this._tag("-modal__total-value","span"),s.appendChild(this._modalTotalValueWrap),o.appendChild(s),[2]}})})},t.prototype._discountLabel=function(t){var e=this._discounts.get(t),i=this._tag("-modal__discount-label");i.innerHTML=e.discount.description;var n=e.discount.details;if(n){var r=this._tag("-modal__hint","span");i.appendChild(r),this._initHint(r,n.title,n.content,n.url)}return i},t.prototype._initHint=function(t,e,i,n){var r;if(n){var s={href:n,class:this._class("-modal-hint-details-btn")};window.IS_TERMINAL_MODE||(s.target="_blank"),(r=this._tag("-modal-hint-details")).appendChild(window.button.create("Подробнее",l.ButtonColorModifiers.WHITE,s).element)}if(this._screen.isDesktop){var o=this._tag("-modal-hint-details-title");o.innerHTML=e;var a=window.popoverBlock.draw(t,o.outerHTML+i,{class:this._class("-modal-hint-details-popover")},{padded:!0,inBody:!0,trigger:"hover"});r&&a.getContent().appendChild(r)}else t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var n=window.modalProvider.getInstance({id:"product-buy-price-hint-modal",mobilePinnedBottom:!0,headerHtml:"",contentHtml:"",visible:!1,size:_.BaseModalSizesEnum.W_400,contentPadded:!0,removeOnHidden:!0});n.setHeader(e),n.setContent(i),r&&n.getContent().appendChild(r),n.show()})},t.prototype._updateTotal=function(){var t=this._calculatedCurrent,e=this._state.price.current;this._additions.forEach(function(t){e+=t.amount});var i=!1;this._discounts.forEach(function(n){n.checkbox?n.checkbox.input.checked&&(t-=n.discount.amount,e-=n.discount.amount,n.discount.type===E.MinPriceDiscountTypeEnum.PAYMENT&&(i=!0)):n.discount.type!==E.MinPriceDiscountTypeEnum.MULTI_ACTION&&(e-=n.discount.amount)}),this._modalTotalValueWrap.innerHTML=u.String_formatPrice(t,!0);var n=this._class("-modal__hidden");this._creditCalculator&&(a.domToggleClass(this._creditCalculatorWrap,n,i),this._creditCalculator.price=e),this._modalCreditWrap&&(a.domToggleClass(this._modalCreditWrap,n,i),this._modalCreditValueWrap.innerHTML=this._creditText(!1,e),this._modalCreditValueWrap.appendChild(this._creditHint(e)))},t.prototype._detailsAmount=function(t){return'<div class="'+this._class("-modal__details-amount")+'">'+u.String_formatPrice(t)+"</div>"},t.prototype._addCreditInfoToModal=function(){var t=this,e=this._state.credit;if(e){var i=this._modal.getContent();if(!this._hasServices){var n=this._tag("-modal__credit");n.innerHTML=e.isInstallment?"В рассрочку":"В кредит",this._modalCreditWrap=n;var r=this._tag("-modal__credit-value","span");r.innerHTML=this._creditText(!1),this._modalCreditValueWrap=r,n.appendChild(r),i.appendChild(n),e.isInstallment||(this._creditCalculator=new m.default(this._calculatedCurrent),this._creditCalculatorWrap=this._collapse("Кредитный калькулятор",this._creditCalculator.element),i.appendChild(this._creditCalculatorWrap))}if((new f.default).get(e.isInstallment).forEach(function(e){i.appendChild(t._collapse(e.title,e.ordered?t._points(e.points):e.points.map(function(t){return"<p>"+t+"</p>"}).join("")))}),0!==this._commonData.banksImages.length){var s=this._tag("-modal__banks");this._commonData.banksImages.forEach(function(e){var i=t._tag("-modal__bank-image","img");i.setAttribute("data-src",e),s.appendChild(i)}),i.appendChild(s)}if(this._commonData.banksUrl){var o=window.links.createLinkBlue("Все банки и их условия",this._commonData.banksUrl);o.classList.add(this._class("-modal__banks-link")),i.appendChild(o),window.dispatchLazyLoadUpdateEvent()}}},t.prototype._creditHint=function(t){var e,i=this._tag("-modal__hint","span"),n=this._state.credit,r=[];n.isInstallment?r.push(u.String_formatPrice(Math.round(t||this._calculatedCurrent),!0)+" /"):(r.push("В кредит на"),e=this._commonData.banksUrl),r.push(n.period+" мес.");var s=0;return this._discounts.forEach(function(t){E.MinPriceDiscountTypeEnum.MULTI_ACTION===t.discount.type?e=t.discount.details.url:(null===t.discount.optionalState||t.checkbox.input.checked)&&(s+=t.discount.amount)}),this._state.price.previous>this._state.price.current&&(s+=this._state.price.previous-this._state.price.current),this._initHint(i,r.join(" "),"В расчете участвует полная стоимость товара"+(s?" с учетом скидки "+s:""),e),i},t.prototype._creditText=function(t,e){var i,n=this._state.credit.isInstallment?t?"или":"":"от";return e?this._state.credit.isInstallment?i=e/this._state.credit.period:this._creditCalculator&&(i=this._creditCalculator.getMonthPayment(0,this._state.credit.period)):i=this._state.credit.amount,[n,u.String_formatPrice(Math.round(i),!0)+"/","мес."].join(" ")},t.prototype._collapse=function(t,e){var i=this,n=this._tag("-modal__collapse-title");n.innerHTML=t,n.appendChild(this._tag("-modal__collapse-icon")),n.addEventListener("click",function(){a.domToggleClass(n,i._class("-modal__collapse-title_in"))});var r=this._tag("-modal__collapse-content");"string"==typeof e?r.innerHTML=e:r.appendChild(e);var s=this._tag("-modal__collapse");return s.appendChild(n),s.appendChild(r),s},t.prototype._points=function(t){var e=this,i=[];t.forEach(function(t,n){var r=e._tag("-modal__point");r.innerText=(n+1).toString(10),i.push("<div>"+r.outerHTML+"</div>"),i.push("<div>"+t+"</div>")});var n=this._tag("-modal__points");return n.innerHTML=i.join(""),n},t}();e.default=v},595:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.BASE=0]="BASE",t[t.KBT=1]="KBT",t[t.KBT_PRODUCT=2]="KBT_PRODUCT",t[t.RSU_PRODUCT=3]="RSU_PRODUCT",t[t.MARKDOWN=4]="MARKDOWN",t[t.RSU=5]="RSU"}(e.ProductBuyTypes||(e.ProductBuyTypes={}))},6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SCREEN_NOT_SUPPORTED=0]="SCREEN_NOT_SUPPORTED",t[t.SCREEN_WIDE=1]="SCREEN_WIDE",t[t.SCREEN_DESKTOP=2]="SCREEN_DESKTOP",t[t.SCREEN_TABLET=3]="SCREEN_TABLET",t[t.SCREEN_MOBILE=4]="SCREEN_MOBILE"}(e.ScreenTypes||(e.ScreenTypes={}))},8:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(6),r=function(){function t(){var t=this;this.SCREEN_MOBILE_MIN_WIDTH=320,this.SCREEN_MOBILE_MAX_WIDTH=767,this.SCREEN_TABLET_MAX_WIDTH=991,this.SCREEN_DESKTOP_MAX_WIDTH=1199,this.EVENT_RESIZE="resize",this.EVENT_OPTIMIZED_RESIZE="optimizedResize",this.EVENT_SCREEN_TYPE_CHANGED="screenTypeChanged",this._currentScreenType=null,this.optimizeResizeEvent=function(e){var i=!1;(e=e||window).addEventListener(t.EVENT_RESIZE,function(){i||(i=!0,requestAnimationFrame(function(){e.dispatchEvent(new CustomEvent(t.EVENT_OPTIMIZED_RESIZE));var n=t.calcCurrent();t._currentScreenType!==n&&(t._currentScreenType=n,e.dispatchEvent(new CustomEvent(t.EVENT_SCREEN_TYPE_CHANGED))),i=!1}))})}}return Object.defineProperty(t.prototype,"current",{get:function(){return null===this._currentScreenType&&(this._currentScreenType=this.calcCurrent()),this._currentScreenType},enumerable:!0,configurable:!0}),t.prototype.calcCurrent=function(){var t=document.querySelector('meta[name="screen-type-helper"]');if(null!==t)return parseInt(t.content,10);var e=window.matchMedia;if(e){if(e("(min-width: "+(this.SCREEN_DESKTOP_MAX_WIDTH+1)+"px)").matches)return n.ScreenTypes.SCREEN_WIDE;if(e("(min-width: "+(this.SCREEN_TABLET_MAX_WIDTH+1)+"px)").matches)return n.ScreenTypes.SCREEN_DESKTOP;if(e("(min-width: "+(this.SCREEN_MOBILE_MAX_WIDTH+1)+"px)").matches)return n.ScreenTypes.SCREEN_TABLET;if(e("(min-width: "+this.SCREEN_MOBILE_MIN_WIDTH+"px)").matches)return n.ScreenTypes.SCREEN_MOBILE}else{var i=window.innerWidth;if(i>this.SCREEN_DESKTOP_MAX_WIDTH)return n.ScreenTypes.SCREEN_WIDE;if(i>this.SCREEN_TABLET_MAX_WIDTH)return n.ScreenTypes.SCREEN_DESKTOP;if(i>this.SCREEN_MOBILE_MAX_WIDTH)return n.ScreenTypes.SCREEN_TABLET;if(i>=this.SCREEN_MOBILE_MIN_WIDTH)return n.ScreenTypes.SCREEN_MOBILE}return n.ScreenTypes.SCREEN_NOT_SUPPORTED},t.prototype.check=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){if(n[i]===this.current)return!0}return!1},Object.defineProperty(t.prototype,"isDesktop",{get:function(){return this.check(n.ScreenTypes.SCREEN_DESKTOP,n.ScreenTypes.SCREEN_WIDE)},enumerable:!0,configurable:!0}),t.prototype.addResizeListener=function(t){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_OPTIMIZED_RESIZE,t)},t.prototype.removeResizeListener=function(t){window.removeEventListener(this.EVENT_OPTIMIZED_RESIZE,t)},t.prototype.addChangeScreenTypeListener=function(t){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_SCREEN_TYPE_CHANGED,t)},t.prototype.removeChangeScreenTypeListener=function(t){window.removeEventListener(this.EVENT_SCREEN_TYPE_CHANGED,t)},t}();e.default=r},87:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.BOTTOM="_bottom",t.BOTTOM_LEFT="_bottom-left",t.BOTTOM_RIGHT="_bottom-right",t.LEFT="_left",t.RIGHT="_right",t.TOP="_top",t.TOP_LEFT="_top-left",t.TOP_RIGHT="_top-right"}(e.TooltipPositionEnum||(e.TooltipPositionEnum={}))}});