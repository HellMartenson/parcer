!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=514)}({105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UPDATE="compareStorage:UPDATE",e.CLEAR="compareStorage:CLEAR"}(t.CompareStorageEventsEnum||(t.CompareStorageEventsEnum={}))},11:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=function(){function e(){var e=this;this._waitingElements=[],this.addWaitingState=function(t){o.Dom_addClasses(t,["ajs-placeholder","ajs-placeholder_waiting"]),e._waitingElements.push(t)}}return Object.defineProperty(e.prototype,"service",{set:function(e){this._service=e},enumerable:!0,configurable:!0}),e.prototype.needGetStateAfterBuild=function(e){return!0},e.prototype.afterRefresh=function(e){this._waitingElements.forEach(function(e){setTimeout(function(){e.classList.remove("ajs-placeholder_waiting")}),setTimeout(function(){e.classList.remove("ajs-placeholder")},1e3)}),this._waitingElements=[]},e}();t.AjaxStateProcessorAbstract=r},2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domToggleClass=function(e,t,n){void 0===n&&(n=!e.classList.contains(t)),!0===n?e.classList.add(t):e.classList.remove(t)}},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dom_addClasses=function(e,t){t.forEach(function(t){e.classList.add(t)})}},514:function(e,t,n){e.exports=n(515)},515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(516);window.AjaxStateProcessorRegistrator.register("compare-link",new o.CompareLinkProcessor)},516:function(e,t,n){"use strict";var o,r=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(105),i=n(2),s=n(3),c=function(e){function t(){var t=e.call(this)||this;return t._badges=new Map,t._count=window.compareStorage.count(),window.addEventListener(a.CompareStorageEventsEnum.UPDATE,function(e){var n=e.detail;t._count=n.count,t._badges.forEach(function(e,n){t.updateCount(n)})}),t}return r(t,e),t.prototype.build=function(e){return this.render(e),{ids:window.compareStorage.getAll()}},t.prototype.needGetStateAfterBuild=function(e){return 0!==this._count},t.prototype.refresh=function(e,t){},t.prototype.afterRefresh=function(e){var t=e.data;t&&window.compareStorage.setAll(t.ids)},t.prototype.render=function(e){var t=e.data,n=document.getElementById(e.id);if(null!==n){var o=window.links.createLinkBase("",t.url);o.classList.add("compare-link");var r=document.createElement("span");s.Dom_addClasses(r,["compare-link__badge","compare-link__badge_empty"]),this._badges.set(e.id,r),o.appendChild(r);var a=document.createElement("span");a.classList.add("compare-link__icon"),o.appendChild(a);var i=document.createElement("span");i.innerText="Сравнить",i.classList.add("compare-link__lbl"),o.appendChild(i),this.updateCount(e.id),n.parentElement.replaceChild(o,n)}},t.prototype.updateCount=function(e){var t=this._badges.get(e);t&&(t.innerText=0!==this._count?this._count.toString():"",i.domToggleClass(t,"compare-link__badge_empty",0===this._count))},t}(n(11).AjaxStateProcessorAbstract);t.CompareLinkProcessor=c}});