!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n;i(1);function r(){return null!==document.querySelector('meta[name="superuser"]')}!function(t){t.LOADED="assets:loaded"}(n||(n={}));var o=function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),r=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)n[r]=o[s];return n};function s(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];!1!==r()&&console[t].apply(console,e)}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.apply(void 0,o(["log"],t))}function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s.apply(void 0,o(["groupCollapsed"],t))}function d(){s("groupEnd")}var h="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==h&&h,u="URLSearchParams"in h,l="Symbol"in h&&"iterator"in Symbol,p="FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch(t){return!1}}(),_="FormData"in h,f="ArrayBuffer"in h;if(f)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};function v(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function E(t){return"string"!=typeof t&&(t=String(t)),t}function g(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return l&&(e[Symbol.iterator]=function(){return e}),e}function b(t){this.map={},t instanceof b?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function w(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function S(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function L(t){var e=new FileReader,i=S(e);return e.readAsArrayBuffer(t),i}function C(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:p&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:_&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:u&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():f&&p&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=C(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f&&(ArrayBuffer.prototype.isPrototypeOf(t)||y(t))?this._bodyArrayBuffer=C(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p&&(this.blob=function(){var t=w(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=w(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(L)}),this.text=function(){var t,e,i,n=w(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,i=S(e),e.readAsText(t),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),n=0;n<e.length;n++)i[n]=String.fromCharCode(e[n]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}b.prototype.append=function(t,e){t=v(t),e=E(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},b.prototype.delete=function(t){delete this.map[v(t)]},b.prototype.get=function(t){return t=v(t),this.has(t)?this.map[t]:null},b.prototype.has=function(t){return this.map.hasOwnProperty(v(t))},b.prototype.set=function(t,e){this.map[v(t)]=E(e)},b.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},b.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),g(t)},b.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),g(t)},b.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),g(t)},l&&(b.prototype[Symbol.iterator]=b.prototype.entries);var T=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function I(t,e){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,r=(e=e||{}).body;if(t instanceof I){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new b(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new b(e.headers)),this.method=(i=e.method||this.method||"GET",n=i.toUpperCase(),T.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function D(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}})),e}function O(t,e){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new b(e.headers),this.url=e.url||"",this._initBody(t)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},A.call(I.prototype),A.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var M=[301,302,303,307,308];O.redirect=function(t,e){if(-1===M.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})};var R=h.DOMException;try{new R}catch(t){(R=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack}).prototype=Object.create(Error.prototype),R.prototype.constructor=R}function x(t,e){return new Promise((function(i,n){var r=new I(t,e);if(r.signal&&r.signal.aborted)return n(new R("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var t,e,n={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",e=new b,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var i=t.split(":"),n=i.shift().trim();if(n){var r=i.join(":").trim();e.append(n,r)}})),e)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;setTimeout((function(){i(new O(r,n))}),0)},o.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){n(new R("Aborted","AbortError"))}),0)},o.open(r.method,function(t){try{return""===t&&h.location.href?h.location.href:t}catch(e){return t}}(r.url),!0),"include"===r.credentials?o.withCredentials=!0:"omit"===r.credentials&&(o.withCredentials=!1),"responseType"in o&&(p?o.responseType="blob":f&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!e||"object"!=typeof e.headers||e.headers instanceof b?r.headers.forEach((function(t,e){o.setRequestHeader(e,t)})):Object.getOwnPropertyNames(e.headers).forEach((function(t){o.setRequestHeader(t,E(e.headers[t]))})),r.signal&&(r.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&r.signal.removeEventListener("abort",s)}),o.send(void 0===r._bodyInit?null:r._bodyInit)}))}x.polyfill=!0,h.fetch||(h.fetch=x,h.Headers=b,h.Request=I,h.Response=O);var P,N=function(){function t(){this.HEAD_ELEMENT=document.querySelector("head")}return t.prototype.postData=function(t,e,i,n){void 0===i&&(i="application/x-www-form-urlencoded");var r={"X-Requested-With":"XMLHttpRequest"},o=this.getCrsfToken();return null!==o&&(r["X-CSRF-Token"]=o),""!==i&&(r["content-type"]=i),fetch(t,Object.assign({},{body:e,cache:"no-cache",credentials:"same-origin",headers:r,method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer"},n||{})).then((function(i){return c("fetch-helper: JSON"),a(t),a(e),a(i),d(),i.json()}))},t.prototype.getData=function(t,e){var i={"X-Requested-With":"XMLHttpRequest"},n=this.getCrsfToken();return null!==n&&(i["X-CSRF-Token"]=n),fetch(t,Object.assign({},{cache:"no-cache",credentials:"same-origin",headers:i,method:"GET",mode:"cors",redirect:"follow",referrer:"no-referrer"},e||{})).then((function(e){return c("fetch-helper: JSON"),a(t),a(e),d(),e.json()}))},t.prototype.getCrsfToken=function(){var t=document.querySelector("meta[name=csrf-token]");return void 0!==t?t.getAttribute("content"):null},t.prototype.processSuccess=function(t){var e=this,i=[];t.assets.jsFiles.forEach((function(t){var n=/.*\/(assets|static\/\d+)\/\w{4,8}(\/.+)/,r=t.replace(n,"$2"),o='script[src$="'+r+'"]',s=document.querySelector(o);if(null===s||s.src.replace(n,"$2")!==r){(s=document.createElement("script")).src=t,s.async=!1;var a=new Promise((function(t){s.addEventListener("load",(function(){t()}))}));e.HEAD_ELEMENT.appendChild(s),i.push(a)}})),t.assets.cssFiles.forEach((function(t){i.push(window.defferCSS(t.url,t.media))}));return Promise.all(i).then((function(){return function(){var i=[];if(window.REGISTERED_JS_KEYS=window.REGISTERED_JS_KEYS||[],Object.keys(t.assets.inlineJs).forEach((function(e){-1===window.REGISTERED_JS_KEYS.indexOf(e)&&(i.push(t.assets.inlineJs[e]),window.REGISTERED_JS_KEYS.push(e))})),0!==i.length){var r=document.createElement("script");r.type="text/javascript",r.innerHTML=i.join("\n"),e.HEAD_ELEMENT.appendChild(r)}window.dispatchEvent(new CustomEvent(n.LOADED))}(),[].slice.call(document.querySelectorAll("[data-show-after-load]")).forEach((function(t){t.hidden=!1})),Promise.resolve()}))},t}();function B(t,e,i){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!0,!0,i),void 0===e?window.dispatchEvent(n):e.dispatchEvent(n)}function H(t,e,i){void 0===i&&(i=!t.classList.contains(e)),!0===i?t.classList.add(e):t.classList.remove(e)}!function(t){t[t.SCREEN_NOT_SUPPORTED=0]="SCREEN_NOT_SUPPORTED",t[t.SCREEN_WIDE=1]="SCREEN_WIDE",t[t.SCREEN_DESKTOP=2]="SCREEN_DESKTOP",t[t.SCREEN_TABLET=3]="SCREEN_TABLET",t[t.SCREEN_MOBILE=4]="SCREEN_MOBILE"}(P||(P={}));var j,k,W=function(){function t(){var t=this;this.SCREEN_MOBILE_MIN_WIDTH=320,this.SCREEN_MOBILE_MAX_WIDTH=767,this.SCREEN_TABLET_MAX_WIDTH=991,this.SCREEN_DESKTOP_MAX_WIDTH=1199,this.EVENT_RESIZE="resize",this.EVENT_OPTIMIZED_RESIZE="optimizedResize",this.EVENT_SCREEN_TYPE_CHANGED="screenTypeChanged",this._currentScreenType=null,this.optimizeResizeEvent=function(e){e=e||window;var i=!1;e.addEventListener(t.EVENT_RESIZE,(function(){i||(i=!0,requestAnimationFrame((function(){e.dispatchEvent(new CustomEvent(t.EVENT_OPTIMIZED_RESIZE));var n=t.calcCurrent();t._currentScreenType!==n&&(t._currentScreenType=n,e.dispatchEvent(new CustomEvent(t.EVENT_SCREEN_TYPE_CHANGED))),i=!1})))}))}}return Object.defineProperty(t.prototype,"current",{get:function(){return null===this._currentScreenType&&(this._currentScreenType=this.calcCurrent()),this._currentScreenType},enumerable:!1,configurable:!0}),t.prototype.calcCurrent=function(){var t=document.querySelector('meta[name="screen-type-helper"]');if(null!==t)return parseInt(t.content,10);var e=window.matchMedia;if(e){if(e("(min-width: "+(this.SCREEN_DESKTOP_MAX_WIDTH+1)+"px)").matches)return P.SCREEN_WIDE;if(e("(min-width: "+(this.SCREEN_TABLET_MAX_WIDTH+1)+"px)").matches)return P.SCREEN_DESKTOP;if(e("(min-width: "+(this.SCREEN_MOBILE_MAX_WIDTH+1)+"px)").matches)return P.SCREEN_TABLET;if(e("(min-width: "+this.SCREEN_MOBILE_MIN_WIDTH+"px)").matches)return P.SCREEN_MOBILE}else{var i=window.innerWidth;if(i>this.SCREEN_DESKTOP_MAX_WIDTH)return P.SCREEN_WIDE;if(i>this.SCREEN_TABLET_MAX_WIDTH)return P.SCREEN_DESKTOP;if(i>this.SCREEN_MOBILE_MAX_WIDTH)return P.SCREEN_TABLET;if(i>=this.SCREEN_MOBILE_MIN_WIDTH)return P.SCREEN_MOBILE}return P.SCREEN_NOT_SUPPORTED},t.prototype.check=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t;i<n.length;i++){var r=n[i];if(r===this.current)return!0}return!1},Object.defineProperty(t.prototype,"isDesktop",{get:function(){return this.check(P.SCREEN_DESKTOP,P.SCREEN_WIDE)},enumerable:!1,configurable:!0}),t.prototype.addResizeListener=function(t){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_OPTIMIZED_RESIZE,t)},t.prototype.removeResizeListener=function(t){window.removeEventListener(this.EVENT_OPTIMIZED_RESIZE,t)},t.prototype.addChangeScreenTypeListener=function(t){this.optimizeResizeEvent(window),window.addEventListener(this.EVENT_SCREEN_TYPE_CHANGED,t)},t.prototype.removeChangeScreenTypeListener=function(t){window.removeEventListener(this.EVENT_SCREEN_TYPE_CHANGED,t)},t}();!function(t){t.IMAGE="image",t.VIDEO="video",t.HTML="html"}(j||(j={})),function(t){t.SHOWED="media-viewer::showed",t.OBJECT_CHANGED="media-viewer::object-changed"}(k||(k={}));var U,V=function(t,e,i){this.data=t,this.preset=e,this.MODAL_CLASS="media-viewer",this.mediaIndex=i,this.init()},G=(U=function(t,e){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}U(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.WRAP_CLASS=e.MODAL_CLASS+"-html",e}return G(e,t),e.prototype.init=function(){},e.prototype.render=function(){var t=document.createElement("div");return t.classList.add(this.WRAP_CLASS),this.data.objects.forEach((function(e){t.innerHTML+=e.content})),B(k.OBJECT_CHANGED),t},e.prototype.afterRender=function(){},e.prototype.beforeUnmount=function(){},e.prototype.onClose=function(){},e}(V),Z=function(){function t(){this.CLASS="media-viewer-slider",this._element=document.createElement("div"),this._element.classList.add(this.CLASS)}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),t.prototype.setSlides=function(t,e){var i=this;this._tns&&this._tns.destroy(),this._element.innerHTML="";var n=document.createElement("div");n.classList.add(this.CLASS+"__wrap"),this._element.appendChild(n),this._slides=t,t.forEach((function(t){t.classList.add(i.CLASS+"__item");var e=document.createElement("div");e.appendChild(t),n.appendChild(e)})),this._tns=window.tns({autoWidth:!0,startIndex:e||0,container:n,controlsText:['<div class="media-viewer-slider__arrow media-viewer-slider__arrow_left"><i></i></div>','<div class="media-viewer-slider__arrow media-viewer-slider__arrow_right"><i></i></div>'],gutter:12,loop:!1,mouseDrag:!0,nav:!1,slideBy:"page",lazyload:!0});var r=!0;n.addEventListener("wheel",(function(e){if(r){r=!1,setTimeout((function(){r=!0}),250);var n=i._tns.getInfo().displayIndex+(e.deltaY>1?5:-5);i._tns.goTo(Math.max(Math.min(n,t.length-1),0))}}))},t.prototype.goTo=function(t){this._tns.goTo(t),this.toggleActive(t)},t.prototype.addIcon=function(t,e){var i=document.createElement("div");i.setAttribute("class",e),i.classList.add(this.CLASS+"__icon"),t.appendChild(i)},t.prototype.toggleActive=function(t){var e=this;this._slides.forEach((function(i,n){H(i,e.CLASS+"__item_active",t===n)}))},t}(),K=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.init=function(){var t=this;this._groups=new Map,(this.data.groups||[]).forEach((function(e){t._groups.set(e.id,e)}))},e}(V),F=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CLASS=e.MODAL_CLASS+"-image",e.MAIN_IMAGE=e.CLASS+"__main-img",e.IMAGE_ZOOMED_CLASS=e.MAIN_IMAGE+"_zoomed",e._slider=new Z,e}return F(e,t),e.prototype.render=function(){var t=this;if(this._wrap)return this._wrap;this._wrap=document.createElement("div"),this._wrap.classList.add(this.CLASS);var e=new W;e.isDesktop&&this._toggleZoom();var i=document.createElement("div");i.classList.add(this.CLASS+"__main"),this._wrap.appendChild(i),e.isDesktop?(i.appendChild(this._getLeftControl()),i.appendChild(this._getRightControl())):this._drawImageCounter(),e.addChangeScreenTypeListener((function(){t._updateMainImg(!1)}));var n,r,o=document.createElement("picture");o.classList.add(this.CLASS+"__img-wrap"),this._mainImage=new Image,this._mainImage.classList.add(this.CLASS+"__main-img"),this._sourceWebp=document.createElement("source"),this._sourceWebp.type="image/webp",o.appendChild(this._mainImage),i.appendChild(o),this._mainWrap=i,this._slider.element.classList.add(this.CLASS+"__slider"),this._wrap.appendChild(this._slider.element),this._documentKeyDownHandlerActive=this._documentKeyDownHandler.bind(this),document.addEventListener("keydown",this._documentKeyDownHandlerActive);var s=this._isPageZoomed;return o.addEventListener("touchstart",(function(t){n=t.changedTouches[0]}),!1),o.addEventListener("touchend",(function(e){s||t._isPageZoomed?s=t._isPageZoomed:(r=e.changedTouches[0],Math.abs(n.pageX-r.pageX)>20&&(r.pageX<n.pageX?t._moveContentRight():t._moveContentLeft()))})),this._wrap},e.prototype.afterRender=function(){this._refresh()},e.prototype.beforeUnmount=function(){this._dropZoom(),document.removeEventListener("keydown",this._documentKeyDownHandlerActive)},e.prototype.onClose=function(){this.preset.onClose()},e.prototype._refresh=function(){this.data.objects[this.mediaIndex]||(this.mediaIndex=0),this._initSlider(),this._updateMainImg()},e.prototype._updateMainImg=function(t){var e=this;void 0===t&&(t=!1);var i=this.data.objects[this.mediaIndex]||this.data.objects[0];this._dropZoom(),t?this._slider.goTo(this.mediaIndex):this._slider.toggleActive(this.mediaIndex),this._imageCounter&&(this._imageCounter.innerText=this.mediaIndex+1+" из "+this.data.objects.length),this._getCurrentImageDescription()!==this._description&&this._mainWrap.classList.add(this.CLASS+"__main_loading"),this._mainImage.classList.add(this.CLASS+"__main-img_loading"),clearTimeout(this._changeTimeout),this._changeTimeout=setTimeout((function(){e._mainImage.onload=function(){e._mainImage.classList.remove(e.CLASS+"__main-img_loading"),e._mainWrap.classList.remove(e.CLASS+"__main_loading"),e._mainImageRect=e._mainImage.getBoundingClientRect(),e._initDescription(),B(k.OBJECT_CHANGED)},i.origSrc.webp?(e._mainImage.parentElement.insertBefore(e._sourceWebp,e._mainImage),e._sourceWebp.srcset=i.origSrc.webp):e._sourceWebp.remove(),e._mainImage.src=i.origSrc.orig}),300)},e.prototype._getCurrentImageDescription=function(){var t,e=this.data.objects[this.mediaIndex]||this.data.objects[0];return e.group&&(t=this.preset.getDescription(e.group)),t},e.prototype._initDescription=function(t){void 0===t&&(t=!1);var e=this._getCurrentImageDescription();(t||this._description!==e)&&(this._toggleDescriptionState(!1),e&&(this._description=e,this._toggleDescriptionState(!0)))},e.prototype._toggleDescriptionState=function(t){H(this._mainWrap,this.CLASS+"__main_with-desc",t);var e=this._description;e&&(e.remove(),t&&(this._mainWrap.appendChild(e.container),e.toggle&&this._wrap.appendChild(e.toggle)))},Object.defineProperty(e.prototype,"_isPageZoomed",{get:function(){return!!window.visualViewport&&1!==window.visualViewport.scale},enumerable:!1,configurable:!0}),e.prototype._getLeftControl=function(){var t=document.createElement("div");return t.classList.add(this.CLASS+"__control"),t.classList.add(this.CLASS+"__control_left"),t.addEventListener("click",this._moveContentLeft.bind(this)),t},e.prototype._getRightControl=function(){var t=document.createElement("div");return t.classList.add(this.CLASS+"__control"),t.classList.add(this.CLASS+"__control_right"),t.addEventListener("click",this._moveContentRight.bind(this)),t},e.prototype._moveContentLeft=function(){this.mediaIndex--,0>this.mediaIndex&&(this.mediaIndex=this.data.objects.length-1),this._updateMainImg(!0)},e.prototype._moveContentRight=function(){this.mediaIndex++,this.data.objects.length-1<this.mediaIndex&&(this.mediaIndex=0),this._updateMainImg(!0)},e.prototype._toggleZoom=function(){var t=this;this._wrap.addEventListener("click",(function(e){var i=e.target;i===t._mainImage&&(i.classList.toggle(t.IMAGE_ZOOMED_CLASS),i.classList.contains(t.IMAGE_ZOOMED_CLASS)?(t._toggleDescriptionState(!1),t._moveHandlerActive=t._mouseMoveHandler.bind(t),t._mouseMoveHandler(e),t._wrap.addEventListener("mousemove",t._moveHandlerActive)):(t._dropZoom(),t._initDescription(!0)))}))},e.prototype._drawImageCounter=function(){this._imageCounter=document.createElement("div"),this._imageCounter.classList.add(this.CLASS+"__image-counter"),this._wrap.appendChild(this._imageCounter)},e.prototype._mouseMoveHandler=function(t){var e=this._mainImageRect,i=(50-Math.min(Math.max(t.clientX-e.left,0),e.width)/e.width*100)/2,n=(50-Math.min(Math.max(t.clientY-e.top,0),e.height)/e.height*100)/2;this._mainImage.style.transform="scale(2) translate("+i+"%, "+n+"%)"},e.prototype._documentKeyDownHandler=function(t){-1!==[37,65,100].indexOf(t.keyCode)?t.target.closest("textarea, input")||this._moveContentLeft():-1!==[39,68,102].indexOf(t.keyCode)&&(t.target.closest("textarea, input")||this._moveContentRight())},e.prototype._dropZoom=function(){this._mainImage.style.transform="none",this._wrap.removeEventListener("mousemove",this._moveHandlerActive),this._mainImage.classList.remove(this.IMAGE_ZOOMED_CLASS)},e.prototype._initSlider=function(){var t=this,e=[];this.data.objects.forEach((function(i,n){var r=document.createElement("picture");if(r.classList.add(t.CLASS+"__slider-item"),i.thumbSrc.webp&&(r.innerHTML='<source type="image/webp" srcset="'+i.thumbSrc.webp+'">'),r.innerHTML+='<img class="'+t.CLASS+'__slider-img" src="'+i.thumbSrc.orig+'" alt="">',i.group){var o=t._groups.get(i.group);o.iconClass&&t._slider.addIcon(r,o.iconClass)}r.addEventListener("click",(function(){t.mediaIndex!==n&&(t.mediaIndex=n,t._updateMainImg())})),e.push(r)})),this._slider.setSlides(e,this.mediaIndex)},e}(X),J=function(){function t(t){var e=this;this.CLASS="media-viewer-image-description",this._screen=new W,this._container=document.createElement("div"),this._container.classList.add(this.CLASS);var i=document.createElement("div");i.classList.add(this.CLASS+"__content"),i.innerHTML=t.content,this._container.appendChild(i);var n=function(){if(!e._screen.isDesktop&&!e._toggle){e._toggle=document.createElement("div"),e._toggle.classList.add(e.CLASS+"-toggle"),e._toggle.innerHTML=t.title,e._toggle.addEventListener("click",(function(){e._toggleVisibility(!0)}));var n=document.createElement("div");n.classList.add(e.CLASS+"__backdrop"),n.addEventListener("click",(function(){e._toggleVisibility(!0)})),n.addEventListener("touchend",(function(){e._toggleVisibility(!1)})),e._container.appendChild(n);var r=document.createElement("div");r.classList.add(e.CLASS+"__content-tilt"),i.appendChild(r),r.addEventListener("click",(function(){e._toggleVisibility(!0)})),r.addEventListener("touchend",(function(){e._toggleVisibility(!1)}))}};this._screen.isDesktop?this._screen.addChangeScreenTypeListener((function(){n()})):n()}return t.prototype._toggleVisibility=function(t){var e=this,i=this.CLASS+"_in",n=this.CLASS+"_out";t?this._container.classList.add(i):(this._container.classList.add(n),setTimeout((function(){e._container.classList.remove(n),e._container.classList.remove(i)}),500))},Object.defineProperty(t.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"toggle",{get:function(){return this._toggle},enumerable:!1,configurable:!0}),t.prototype.remove=function(){this._toggleVisibility(!1),this._container.remove(),this._toggle&&this._toggle.remove()},t}(),Y=function(){function t(t){this._descriptions=new Map,this._initDescriptions(t)}return t.prototype._initDescriptions=function(t){var e=this,i=document.createElement("div");i.setAttribute("hidden",""),(t.groups||[]).forEach((function(t){if(t.description){var n=new J(t.description);e._descriptions.set(t.id,n),i.appendChild(n.container)}})),document.body.appendChild(i),this._descriptionsWrap=i},t.prototype.onClose=function(){this._descriptionsWrap.remove()},t.prototype.getDescription=function(t){return this._descriptions.get(t)||null},t}(),$=function(){function t(){this.CLASS="media-viewer-hint",this.container=document.createElement("div"),this.container.classList.add(this.CLASS)}return t.prototype.hide=function(){this.container.classList.add(this.CLASS+"_hide")},t.prototype.show=function(){this.container.classList.remove(this.CLASS+"_hide")},t.prototype.setContent=function(t){this.container.innerHTML=t},Object.defineProperty(t.prototype,"element",{get:function(){return this.container},enumerable:!1,configurable:!0}),t}(),Q=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.CLASS=e.MODAL_CLASS+"-video",e._hint=new $,e._slider=new Z,e}return Q(e,t),e.prototype.init=function(){var t=this;this._groups=new Map,(this.data.groups||[]).forEach((function(e){t._groups.set(e.id,e)}))},e.prototype.render=function(){return this._wrap||(this._wrap=document.createElement("div"),this._wrap.classList.add(this.CLASS),this._iframeWrap=document.createElement("div"),this._wrap.appendChild(this._hint.element),this._iframeWrap.classList.add(this.CLASS+"__iframe-wrap"),this._wrap.appendChild(this._iframeWrap),this._slider.element.classList.add(this.CLASS+"__slider"),this._wrap.appendChild(this._slider.element),this._resizeHandlerActive=this._resizeThrottler.bind(this),window.addEventListener("resize",this._resizeHandlerActive,!1)),this._wrap},e.prototype.afterRender=function(){this._refresh()},e.prototype.beforeUnmount=function(){window.removeEventListener("resize",this._resizeHandlerActive)},e.prototype.onClose=function(){},e.prototype._refresh=function(){this.data.objects[this.mediaIndex]||(this.mediaIndex=0),this._initSlider(),this._updateMainVideo()},e.prototype._updateMainVideo=function(t){var e=this;void 0===t&&(t=!1);var i=this.data.objects[this.mediaIndex]||this.data.objects[0];i.hint?(this._hint.setContent(i.hint),this._hint.show()):this._hint.hide(),t?this._slider.goTo(this.mediaIndex):this._slider.toggleActive(this.mediaIndex),this._iframeWrap.innerHTML="",this._iframe=document.createElement("iframe"),this._iframe.classList.add(this.CLASS+"__iframe"),this._iframeWrap.appendChild(this._iframe),this._iframe.src=i.url,this._iframe.style.height="0",this._updateCustomData(this._iframe,i),setTimeout((function(){e._resizeIframe()}),100),B(k.OBJECT_CHANGED)},e.prototype._updateCustomData=function(t,e){if(e.data)for(var i in e.data)e.data.hasOwnProperty(i)&&t.setAttribute("data-"+i,e.data[i])},e.prototype._initSlider=function(){var t=this,e=[];this.data.objects.forEach((function(i,n){var r=document.createElement("div");if(t._updateCustomData(r,i),r.classList.add(t.CLASS+"__item"),r.innerHTML='\n\t\t\t\t<img class="'+t.CLASS+'__item-image" src="'+i.imageUrl+'" alt="">\n\t\t\t\t<div class="'+t.CLASS+'__item-title">'+i.title+"</div>\n\t\t\t",i.group){var o=t._groups.get(i.group);o.iconClass&&t._slider.addIcon(r,o.iconClass)}r.addEventListener("click",(function(){if(t.mediaIndex!==n){var e=t.data.objects[t.mediaIndex];if(e.data)for(var i in e.data)e.data.hasOwnProperty(i)&&t._iframe.removeAttribute("data-"+i);t.mediaIndex=n,t._updateMainVideo()}})),e.push(r)})),this._slider.setSlides(e,this.mediaIndex),H(this._slider.element,this.CLASS+"__slider_hidden",1===this.data.objects.length)},e.prototype._resizeIframe=function(){this._iframe.style.height="0";var t=this._iframeWrap.offsetWidth,e=this._iframeWrap.offsetHeight;0===e&&(e=this._wrap.parentElement.offsetHeight-this._slider.element.offsetHeight),t/e<16/9?(this._iframe.style.width="100vw",this._iframe.style.height="calc(100vw * 9 / 16)"):(this._iframe.style.width="calc("+e+"px * 16 / 9)",this._iframe.style.height=e+"px")},e.prototype._resizeThrottler=function(){var t=this;this._iframe&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((function(){t._resizeIframe()}),66))},e}(X),et=function(){function t(t,e){var i=this;this._data=t,this._onClose=e,this.MODAL_CLASS="media-viewer",this._tabs=new Map,this._tabsPresets=new Map,this._titles=new Map,t.tabs.forEach((function(t){switch(i._tabs.set(t.id,t),t.type){case j.IMAGE:i._tabsPresets.set(t.id,new Y(t))}}))}return t.prototype.showTab=function(t,e){var i=this;this._currentScroll=this._currentScroll||window.scrollY,document.body.classList.add("media-viewer-showed"),this._tabs.has(t)?this._currentTabId=t:this._currentTabId=this._tabs.keys().next().value,this._mediaIndex=0,void 0!==e&&this._tabs.get(this._currentTabId).objects.map((function(t,n){t.id===e&&(i._mediaIndex=n)})),this._currentBuilder&&(this._currentBuilder.beforeUnmount(),this._currentBuilder=void 0),this._modal||this._buildModal(),this._setActiveContent(),(new W).isDesktop||this.interceptPageLeave(),B(k.SHOWED,void 0,{id:this._currentTabId})},t.prototype._renderTabs=function(){var t=this,e=document.createElement("div");e.classList.add(this.MODAL_CLASS+"__titles"),this._tabs.forEach((function(i,n){var r=document.createElement("div");r.classList.add(t.MODAL_CLASS+"__title"),t._currentTabId===n&&r.classList.add(t.MODAL_CLASS+"__title_active"),r.innerText=i.title,r.addEventListener("click",(function(e){e.preventDefault(),t.showTab(n)})),e.appendChild(r),t._titles.set(n,r)})),this._modal.appendChild(e)},t.prototype._setActiveContent=function(){var t=this;this._modalContent.innerHTML="",this._titles.forEach((function(e,i){H(e,t.MODAL_CLASS+"__title_active",t._currentTabId===i)})),this._currentBuilder=this._getBuilder(),this._modalContent.appendChild(this._currentBuilder.render()),this._currentBuilder.afterRender()},t.prototype._getBuilder=function(){var t=this._tabs.get(this._currentTabId),e=this._tabsPresets.get(this._currentTabId),i=this._mediaIndex;switch(t.type){case j.IMAGE:return new q(t,e,i);case j.VIDEO:return new tt(t,e,i);case j.HTML:return new z(t,e,i);default:throw new Error("Неизвестный тип медиа-контента")}},t.prototype._buildModal=function(){var t=this;this._modal=document.createElement("div"),this._modal.classList.add(this.MODAL_CLASS);var e=document.createElement("div");e.classList.add(this.MODAL_CLASS+"__head"),e.innerHTML='<div class="'+this.MODAL_CLASS+'__head-text">'+this._data.title+"</div>";var i=document.createElement("i");i.classList.add(this.MODAL_CLASS+"__close"),i.addEventListener("click",(function(){t._closeModal()})),this._documentKeyDownHandlerActive=this._documentKeyDownHandler.bind(this),document.addEventListener("keydown",this._documentKeyDownHandlerActive),e.appendChild(i),this._modal.appendChild(e),this._data.hideTabs||this._renderTabs(),this._modalContent=e,this._modalContent=document.createElement("div"),this._modalContent.classList.add(this.MODAL_CLASS+"__content"),this._modal.appendChild(this._modalContent),document.body.appendChild(this._modal)},t.prototype._closeModal=function(){this._modal.remove(),this._modal=void 0,this._currentTabId=void 0,this._mediaIndex=void 0,this._currentBuilder.beforeUnmount(),this._currentBuilder.onClose(),this._currentBuilder=void 0,document.body.classList.remove("media-viewer-showed"),window.scrollTo(0,this._currentScroll),document.removeEventListener("keydown",this._documentKeyDownHandlerActive),this._onClose&&this._onClose()},t.prototype._documentKeyDownHandler=function(t){27===t.keyCode&&this._closeModal()},t.prototype.interceptPageLeave=function(){var t=this;history.pushState({open:"1"},"Медиа-контент"),window.addEventListener("popstate",(function(e){return e.preventDefault(),(e||window.event).returnValue=null,t._closeModal(),null}),!1)},t}(),it=function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},nt=function(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&o[0]?n.return:o[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,o[1])).done)return r;switch(n=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{i=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},rt=new(function(){function t(){this._modals=new Map,this._fetch=new N}return t.prototype.show=function(t,e,i){return it(this,void 0,void 0,(function(){var n,r=this;return nt(this,(function(o){switch(o.label){case 0:return!1!==this._modals.has(t)?[3,2]:(this._toggleLoader(!0),[4,this._fetch.postData(t,"","").then((function(e){if(e.result){var i=new et(e.data,(function(){r._modals.delete(t)}));return r._fetch.processSuccess(e).then((function(){return i}))}return null})).catch((function(){return null}))]);case 1:if(n=o.sent(),this._toggleLoader(!1),null===n)return[2];this._modals.set(t,n),o.label=2;case 2:return this._modals.get(t).showTab(e,i),[2]}}))}))},t.prototype.showViaConfig=function(t,e,i,n){void 0===i&&(i=""),!1===this._modals.has(t)&&this._modals.set(t,new et(e)),this._modals.get(t).showTab(i,n)},t.prototype._toggleLoader=function(t){window.toggleLoaderVisibility&&window.toggleLoaderVisibility(t)},t}());window.mediaViewer=rt,document.addEventListener("click",(function(t){var e=t.target,i=e.hasAttribute("data-mv")?e:e.closest("[data-mv]");if(i){var n=i.closest("[data-mv-src]");if(n){t.preventDefault();var r=i.getAttribute("data-mv").split(":"),o=r[0],s=r[1]||void 0,a=n.getAttribute("data-mv-src");rt.show(a,o,s)}}}))},function(t,e){}]);